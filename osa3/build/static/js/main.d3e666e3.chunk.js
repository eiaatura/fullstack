(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{24:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),o=t(19),u=t.n(o),a=(t(24),t(9)),i=t(4),l=t(5),s=t.n(l),d="http://localhost:3001/api/persons",f=function(){return s.a.get(d).then((function(e){return e.data}))},j=function(e){return s.a.post(d,e).then((function(e){return e.data}))},b=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},m=t(0),O=function(e){var n=e.message;if(null===n)return null;var t={color:n.color_green?"green":"red",background:"#D3D3D3",fontSize:"150%",borderStyle:"solid",borderRadius:"2px",padding:"5px"};return Object(m.jsxs)("div",{style:t,children:[" ",n.content," "]})},p=function(e){return Object(m.jsxs)("form",{onSubmit:e.addPerson,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:e.newName,onChange:e.changeName})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:e.newNumber,onChange:e.changeNumber})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.filter,t=e.onFilterChange;return Object(m.jsxs)("p",{children:["filter shown with ",Object(m.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.persons,t=e.filter,r=e.onDelete;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Numbers"}),n.filter((function(e){return e.name.toUpperCase().includes(t.toUpperCase())})).map((function(e){return Object(m.jsx)(x,{person:e,onDelete:r},e.name)}))]})},x=function(e){var n=e.person,t=e.onDelete;return Object(m.jsxs)("div",{children:[n.name," ",n.number," ",Object(m.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},w=function(){var e=Object(r.useState)(""),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)([]),u=Object(i.a)(o,2),l=u[0],s=u[1],d=Object(r.useState)(""),x=Object(i.a)(d,2),w=x[0],D=x[1],C=Object(r.useState)(null),S=Object(i.a)(C,2),N=S[0],y=S[1],_=Object(r.useState)(""),F=Object(i.a)(_,2),k=F[0],P=F[1],I=null===N?null:N.color_green,E=null===N?null:N.content;Object(r.useEffect)((function(){f().then((function(e){return s(e)}))}),[]),Object(r.useEffect)((function(){var e=setTimeout((function(){return y(null)}),5e3);return function(){return clearInterval(e)}}),[E,I]);return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Phonebook"}),Object(m.jsx)(O,{message:N}),Object(m.jsx)(g,{filter:k,onFilterChange:function(e){return P(e.target.value)}}),Object(m.jsx)("h2",{children:"Add a new"}),Object(m.jsx)(p,{addPerson:function(e){(e.preventDefault(),function(e,n){return e.filter((function(e){return e.name===n})).length>0}(l,t))?window.confirm("".concat(t," is created already. Do you want to update it with new number?"))&&function(e){var n=l.find((function(n){return n.name===e})),t=Object(a.a)(Object(a.a)({},n),{},{number:w});b(t.id,t).then((function(e){s(l.map((function(t){return t.id!==n.id?t:e}))),y({content:"Updated ".concat(t.name,"."),color_green:!0})}))}(t):(j({name:t,number:w}).then((function(e){s(l.concat(e)),y({content:"Added ".concat(e.name),color_green:!0})})),c(""),D(""))},changeName:function(e){return c(e.target.value)},changeNumber:function(e){return D(e.target.value)},newName:t,newNumber:w}),Object(m.jsx)(v,{persons:l,filter:k,onDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&h(e.id).then((function(){s(l.filter((function(n){return n.id!==e.id}))),y({content:"Deleted ".concat(e.name),color_green:!1})})).catch((function(n){"Request failed with status code 404"===n.message?y({content:"Information of ".concat(e.name," has already been removed from server"),color_green:!0}):y({content:n.response.data.error,color_green:!1})}))}})]})},D=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,51)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,u=n.getTTFB;t(e),r(e),c(e),o(e),u(e)}))};u.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root")),D()}},[[50,1,2]]]);
//# sourceMappingURL=main.d3e666e3.chunk.js.map